<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>JSON Lint</title>
<script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js"></script>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>


<script src="json2.js"></script>
    <script src="jsonlint.js"></script>
    <script>
      window.onload = function () {
        document.getElementById("button").onclick = function () {
          try {
            var result = jsonlint.parse(document.getElementById("source").value);
            if (result) {
              document.getElementById("result").innerHTML = "JSON is valid!";
              document.getElementById("result").className = "pass";
              if (document.getElementById("reformat").checked) {
                document.getElementById("source").value = JSON.stringify(result, null, "  ");
              }
            }
          } catch(e) {
            document.getElementById("result").innerHTML = e;
            document.getElementById("result").className = "fail";
          }
        };
      }
    </script>
    <style>
      body {font-family: sans-serif;}
      #result {
        padding: 1em;
      }
      .pass {
        background-color: #efe;
        color: #393;
        border: 2px solid #393;
      }
      .fail {
        background-color: #fee;
        color: #933;
        border: 2px solid #933;
      }
      textarea {
        resize: none;
        }
    </style>
</head>
<body>

<!-- Image and text -->
<nav class="navbar navbar-dark bg-dark">
  <a class="navbar-brand" href="#">
    <img src="https://web-assets.cred.club/_next/assets/images/home-page/cred-logo.png" width="40" height="50" class="d-inline-block align-top" alt=""><a href="#" class="navbar navbar-brand mr-auto"> JSON Lint </a>
  </a>
</nav>
<br>
<br>
<div class="container-fluid">
<div class="input-group">
  <div class="input-group-prepend">
    <textarea class="form-control overflow-hidden" rows="20" cols="2" value="1" placeholder="Sr" readonly></textarea>
  </div>
  <textarea class="form-control" id="source" rows="20" cols="50" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"
                        onclick="selectionchanged(this)" onkeyup="keyup(this,event)" oninput="input_changed(this)" onscroll="scroll_changed(this)" aria-label="With textarea" placeholder="Enter Your JSON Data here"></textarea>
</div>
<!-- <textarea class="rownr" rows="20" cols="3" value="1" readonly></textarea>  
<textarea id="source" rows="20" cols="50" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"
                        onclick="selectionchanged(this)" onkeyup="keyup(this,event)" oninput="input_changed(this)" onscroll="scroll_changed(this)">
  </textarea>
-->
<p>
    <input type="checkbox" value="yes" id="reformat" /><label for="reformat">  Reformat JSON?</label>
    <button id="button" class="btn btn-outline-success">Reformat/Validate</button>
    <button class="btn btn-outline-primary" data-clipboard-target="#source">Copy</button>
    <button class="btn btn-outline-danger" onClick="yourFunction();">Clear</button>
<script>
function yourFunction(){
     document.getElementById('source').value = "";
};

    var clipboard = new ClipboardJS('.btn');

clipboard.on('success', function(e) {
    document.getElementById("result").innerHTML = "Copied to Clipboard!";
document.getElementById("result").className = "pass";
});

clipboard.on('error', function(e) {
    console.error('Action:', e.action);
    console.error('Trigger:', e.trigger);
});
    </script>
</p>
</div>
<SCRIPT Language="javascript">

        var cntline;

        function keyup(obj, e)
        {
                if(e.keyCode >= 33 && e.keyCode <= 40) // arrows ; home ; end ; page up/down
                        selectionchanged(obj, e.keyCode);
        }

        function selectionchanged(obj)
        {
                var substr = obj.value.substring(0,obj.selectionStart).split('\n');
                var row = substr.length;
                var col = substr[substr.length-1].length;
                var tmpstr = '(' + row.toString() + ',' + col.toString() + ')';
                // if selection spans over
                if(obj.selectionStart != obj.selectionEnd)
                {
                        substr = obj.value.substring(obj.selectionStart, obj.selectionEnd).split('\n');
                        row += substr.length - 1;
                        col = substr[substr.length-1].length;
                        tmpstr += ' - (' + row.toString() + ',' + col.toString() + ')';
                }
                obj.parentElement.getElementsByTagName('input')[0].value = tmpstr;
        }

        function input_changed(obj_txt)
        {
                obj_rownr = obj_txt.parentElement.parentElement.getElementsByTagName('textarea')[0];
                cntline = count_lines(obj_txt.value);
                if(cntline == 0) cntline = 1;
                tmp_arr = obj_rownr.value.split('\n');
                cntline_old = parseInt(tmp_arr[tmp_arr.length - 1], 10);
                // if there was a change in line count
                if(cntline != cntline_old)
                {
                        obj_rownr.cols = cntline.toString().length+1; // new width of txt_rownr
                        populate_rownr(obj_rownr, cntline);
                        scroll_changed(obj_txt);
                }
                selectionchanged(obj_txt);
        }
        function scroll_changed(obj_txt)
        {
                obj_rownr = obj_txt.parentElement.parentElement.getElementsByTagName('textarea')[0];
                scrollsync(obj_txt,obj_rownr);
        }

        function scrollsync(obj1, obj2)
        {
                // scroll text in object id1 the same as object id2
                obj2.scrollTop = obj1.scrollTop;
        }

        function populate_rownr(obj, cntline)
        {
                tmpstr = '';
                for(i = 1; i <= cntline; i++)
                {
                        tmpstr = tmpstr + i.toString() + '\n';
                }
                obj.value = tmpstr;
        }

        function count_lines(txt)
        {
                if(txt == '')
                {
                        return 1;
                }
                return txt.split('\n').length;
        }

</SCRIPT>

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>


<div class = "container-fluid">
    <h2>Results</h2>
    <pre id="result"></pre>
  </body>
  </html>
  
  